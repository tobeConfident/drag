{"ast":null,"code":"import _classCallCheck from \"/Users/zhengyunqing/Documents/zhengyunqing/project_zhengyunqing/dragout/drag/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/zhengyunqing/Documents/zhengyunqing/project_zhengyunqing/dragout/drag/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/zhengyunqing/Documents/zhengyunqing/project_zhengyunqing/dragout/drag/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/zhengyunqing/Documents/zhengyunqing/project_zhengyunqing/dragout/drag/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/zhengyunqing/Documents/zhengyunqing/project_zhengyunqing/dragout/drag/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/zhengyunqing/Documents/zhengyunqing/project_zhengyunqing/dragout/drag/src/page/ToolBoxItem/ToolBoxItem.jsx\";\nimport React, { Component } from \"react\";\nimport \"../styles.css\";\nimport \"../example-styles.css\";\nimport { Responsive, WidthProvider } from \"react-grid-layout\";\nvar ResponsiveReactGridLayout = WidthProvider(Responsive);\n\nvar ShowcaseLayout =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ShowcaseLayout, _Component);\n\n  function ShowcaseLayout() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ShowcaseLayout);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ShowcaseLayout)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      arr: [{\n        key: \"1\"\n      }, {\n        key: \"2\"\n      }],\n      layouts: {\n        lg: []\n      }\n    };\n\n    _this.generateLayout = function () {\n      var dragArr = JSON.parse(sessionStorage.getItem('dragArr')) || [];\n      var json = dragArr.map(function (item) {\n        return {\n          x: Math.ceil(Math.random() * 3),\n          y: Math.ceil(Math.random() * 2),\n          w: Math.ceil(Math.random() * 3),\n          h: Math.ceil(Math.random() * 2),\n          i: item.key.toString()\n        };\n      });\n      var tempJson = {\n        lg: json\n      };\n\n      _this.setState({\n        layouts: tempJson\n      });\n    };\n\n    _this.onDelete = function (item) {\n      // let child = document.getElementById(item);\n      // child.parentNode.removeChild(child);\n      var dragArr = _this.state.arr;\n      dragArr.splice(item, 1);\n\n      _this.setState({\n        arr: dragArr\n      }); // 存储\n\n\n      sessionStorage.setItem('dragArr', JSON.stringify(dragArr));\n    };\n\n    _this.handleAdd = function () {\n      var dragArr = _this.state.arr;\n      var key = Math.ceil(Math.random() * 100);\n      var tempJson = {\n        key: key,\n        width: 100,\n        height: 100\n      };\n      dragArr.push(tempJson);\n\n      _this.setState({\n        arr: dragArr\n      }); // 存储\n\n\n      sessionStorage.setItem('dragArr', JSON.stringify(dragArr));\n    };\n\n    _this.onLayoutChange = function (layout, layouts) {\n      // 存储\n      sessionStorage.setItem('layouts', JSON.stringify(layouts));\n    };\n\n    return _this;\n  }\n\n  _createClass(ShowcaseLayout, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      // 取出\n      this.setState({\n        arr: JSON.parse(sessionStorage.getItem('dragArr')) || [],\n        layouts: JSON.parse(sessionStorage.getItem('layouts')) || []\n      });\n      this.generateLayout();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _ref = this.state || [] || {},\n          dragArr = _ref.dragArr,\n          layouts = _ref.layouts; // const dragArr = this.state.arr;\n      // const layout = this.state.layouts;\n      // const layout = this.state.layouts || [];\n\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.handleAdd,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, \"\\u6DFB\\u52A0\"), React.createElement(ResponsiveReactGridLayout, {\n        layouts: layouts,\n        onLayoutChange: this.onLayoutChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, dragArr.map(function (item, index) {\n        return React.createElement(\"div\", {\n          key: item.key,\n          id: item.key,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"hide-button\",\n          onClick: _this2.onDelete.bind(_this2, index),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        }, \"\\xD7\"), item.key);\n      })));\n    }\n  }]);\n\n  return ShowcaseLayout;\n}(Component);\n\nexport { ShowcaseLayout as default };\n\nif (require.main === module) {\n  require(\"../test-hook.jsx\")(module.exports);\n}","map":{"version":3,"sources":["/Users/zhengyunqing/Documents/zhengyunqing/project_zhengyunqing/dragout/drag/src/page/ToolBoxItem/ToolBoxItem.jsx"],"names":["React","Component","Responsive","WidthProvider","ResponsiveReactGridLayout","ShowcaseLayout","state","arr","key","layouts","lg","generateLayout","dragArr","JSON","parse","sessionStorage","getItem","json","map","item","x","Math","ceil","random","y","w","h","i","toString","tempJson","setState","onDelete","splice","setItem","stringify","handleAdd","width","height","push","onLayoutChange","layout","index","bind","require","main","module","exports"],"mappings":"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","sourcesContent":["import React,{Component} from \"react\";\nimport \"../styles.css\";\nimport \"../example-styles.css\";\nimport { Responsive, WidthProvider } from \"react-grid-layout\";\nconst ResponsiveReactGridLayout = WidthProvider(Responsive);\n\nexport default class ShowcaseLayout extends Component {\n    state = {\n        arr:[{\n           key:\"1\",\n        },{\n            key:\"2\",\n        }],\n        layouts: { lg: [] },\n    };\n    componentWillMount() {\n        // 取出\n        this.setState({\n            arr: JSON.parse(sessionStorage.getItem('dragArr')) || [],\n            layouts: JSON.parse(sessionStorage.getItem('layouts')) || []\n        })\n        this.generateLayout();\n       \n    }\n    generateLayout = () => {\n        const dragArr = JSON.parse(sessionStorage.getItem('dragArr')) || [];\n        const json = dragArr.map((item) => {\n            return (\n                {\n                    x: Math.ceil(Math.random() * 3),\n                    y: Math.ceil(Math.random() * 2),\n                    w: Math.ceil(Math.random() * 3),\n                    h: Math.ceil(Math.random() * 2),\n                    i: item.key.toString(),\n                }\n            );\n        });\n        const tempJson = {lg: json}\n        this.setState({\n            layouts: tempJson\n        })\n    };\n    /**\n     * 两种方式实现删除操作\n     * 1.对DOM节点进行操作\n     * 2.对已有的数组进行操作*/\n    onDelete = item => {\n        // let child = document.getElementById(item);\n        // child.parentNode.removeChild(child);\n        let dragArr = this.state.arr;\n        dragArr.splice(item,1);\n        this.setState({\n            arr:dragArr\n        })\n        // 存储\n        sessionStorage.setItem('dragArr',JSON.stringify(dragArr));\n    };\n    // 添加操作\n    handleAdd = () => {\n        let dragArr = this.state.arr;\n        let key = Math.ceil(Math.random()*100);\n        let tempJson = {key:key,width:100,height:100};\n        dragArr.push(tempJson);\n        this.setState({\n            arr: dragArr\n        })\n        // 存储\n        sessionStorage.setItem('dragArr',JSON.stringify(dragArr));\n    };\n    // 改变大小\n    onLayoutChange = (layout, layouts) => {\n        // 存储\n        sessionStorage.setItem('layouts',JSON.stringify(layouts));\n    };\n    render() {\n        const {dragArr,layouts} = this.state || [] || {};\n        // const dragArr = this.state.arr;\n        // const layout = this.state.layouts;\n\n        // const layout = this.state.layouts || [];\n        return (\n            <div>\n                <button onClick={this.handleAdd}>添加</button>\n                <ResponsiveReactGridLayout\n                    layouts={layouts}\n                    onLayoutChange={this.onLayoutChange}\n                >\n                    {dragArr.map((item,index)=>{\n                        return (\n                            <div key={item.key} id={item.key}>\n                                <div className=\"hide-button\" onClick={this.onDelete.bind(this, index)}>\n                                    &times;\n                                </div>\n                                {item.key}\n                            </div>\n                        );\n                    })}\n                </ResponsiveReactGridLayout>\n            </div>\n        );\n    }\n}\n\nif (require.main === module) {\n    require(\"../test-hook.jsx\")(module.exports);\n}\n"]},"metadata":{},"sourceType":"module"}