{"ast":null,"code":"import _classCallCheck from \"/Users/zhengyunqing/Documents/zhengyunqing/project_zhengyunqing/dragout/drag/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/zhengyunqing/Documents/zhengyunqing/project_zhengyunqing/dragout/drag/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/zhengyunqing/Documents/zhengyunqing/project_zhengyunqing/dragout/drag/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/zhengyunqing/Documents/zhengyunqing/project_zhengyunqing/dragout/drag/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/zhengyunqing/Documents/zhengyunqing/project_zhengyunqing/dragout/drag/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/zhengyunqing/Documents/zhengyunqing/project_zhengyunqing/dragout/drag/src/page/ToolBoxItem/ToolBoxItem.jsx\";\nimport React, { Component } from \"react\";\nimport \"../styles.css\";\nimport \"../example-styles.css\";\nimport { G2, Chart, Geom, Axis, Tooltip, Coord, Label, Legend } from \"bizcharts\";\nimport { Responsive, WidthProvider } from \"react-grid-layout\";\nimport DataSet from \"@antv/data-set\";\nvar ResponsiveReactGridLayout = WidthProvider(Responsive);\n\nvar ShowcaseLayout =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ShowcaseLayout, _Component);\n\n  function ShowcaseLayout() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ShowcaseLayout);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ShowcaseLayout)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      arr: [],\n      layouts: {\n        lg: []\n      },\n      chartData: [{\n        value: 3,\n        name: 'MPOS'\n      }, {\n        value: 7,\n        name: '传统POS'\n      }, {\n        value: 2,\n        name: '互联网商户'\n      }, {\n        value: 12,\n        name: '创新POS'\n      }] // flag: false\n\n    };\n\n    _this.generateLayout = function () {\n      console.log(11);\n      var dragArr = JSON.parse(sessionStorage.getItem('dragArr')) || [];\n      var json = dragArr.map(function (item) {\n        return {\n          x: 0,\n          y: 2,\n          w: 6,\n          h: 1,\n          minH: 1,\n          minW: 5,\n          i: item.key.toString()\n        };\n      }); // const layouts = JSON.parse(sessionStorage.getItem('layouts')) || {lg:json};\n\n      var tempJson = {\n        lg: json\n      };\n\n      _this.setState({\n        layouts: tempJson\n      });\n    };\n\n    _this.onDelete = function (item) {\n      // let child = document.getElementById(item);\n      // child.parentNode.removeChild(child);\n      var dragArr = _this.state.arr;\n      dragArr.splice(item, 1);\n\n      _this.setState({\n        arr: dragArr\n      }); // 存储\n\n\n      sessionStorage.setItem('dragArr', JSON.stringify(dragArr));\n    };\n\n    _this.handleAdd = function () {\n      var dragArr = _this.state.arr;\n      var key = Math.ceil(Math.random() * 100);\n      var tempJson = {\n        key: key\n      };\n      dragArr.push(tempJson);\n\n      _this.setState({\n        arr: dragArr\n      }); // 存储\n\n\n      sessionStorage.setItem('dragArr', JSON.stringify(dragArr));\n\n      _this.generateLayout();\n    };\n\n    _this.onLayoutChange = function (layout, layouts) {\n      console.log(layouts); // this.setState({layouts})    \n      // 存储\n\n      sessionStorage.setItem('layouts', JSON.stringify(layouts));\n    };\n\n    return _this;\n  }\n\n  _createClass(ShowcaseLayout, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      // 取出\n      this.setState({\n        arr: JSON.parse(sessionStorage.getItem('dragArr')) || []\n      });\n      console.log(this.state.arr);\n      this.generateLayout(); // 执行初始化layouts函数\n\n      this.setState({\n        layouts: JSON.parse(sessionStorage.getItem('layouts')) || {}\n      });\n    } // 初始化layouts\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _ref = this.state || [] || {},\n          arr = _ref.arr,\n          layouts = _ref.layouts;\n\n      var DataView = DataSet.DataView;\n      var data = this.state.chartData || [];\n      var dv = new DataView();\n      dv.source(data).transform({\n        type: \"percent\",\n        field: \"value\",\n        dimension: \"name\",\n        as: \"percent\"\n      });\n      var cols = {\n        percent: {\n          formatter: function formatter(val) {\n            val = (val * 100).toFixed(2) + \"%\";\n            return val;\n          }\n        }\n      };\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.handleAdd,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, \"\\u6DFB\\u52A0\"), React.createElement(ResponsiveReactGridLayout, {\n        layouts: layouts,\n        onLayoutChange: this.onLayoutChange,\n        style: {\n          background: \"#fff\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, arr.map(function (item, index) {\n        return React.createElement(\"div\", {\n          key: item.key,\n          id: item.key,\n          style: {\n            background: \"#fff\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"hide-button\",\n          onClick: _this2.onDelete.bind(_this2, index),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134\n          },\n          __self: this\n        }, \"\\xD7\"), React.createElement(Chart, {\n          width: 350,\n          height: 220,\n          data: dv,\n          scale: cols,\n          padding: [-10, 100, 30, 0],\n          forceFit: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137\n          },\n          __self: this\n        }, React.createElement(Coord, {\n          type: \"theta\",\n          radius: 0.3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145\n          },\n          __self: this\n        }), React.createElement(Axis, {\n          name: \"percent\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146\n          },\n          __self: this\n        }), React.createElement(Legend, {\n          position: \"right-top\",\n          offsetY: 30,\n          offsetX: -10,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 147\n          },\n          __self: this\n        }), React.createElement(Tooltip, {\n          showTitle: false,\n          itemTpl: \"<li><span style=\\\"background-color:{color};\\\" class=\\\"g2-tooltip-marker\\\"></span>{name}: {value}</li>\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152\n          },\n          __self: this\n        }), React.createElement(Geom, {\n          type: \"intervalStack\",\n          position: \"percent\",\n          color: \"name\",\n          tooltip: [\"name*percent\", function (item, percent) {\n            percent = (percent * 100).toFixed(2) + \"%\";\n            return {\n              name: item,\n              value: percent\n            };\n          }],\n          style: {\n            lineWidth: 1,\n            stroke: \"#fff\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 156\n          },\n          __self: this\n        }, React.createElement(Label, {\n          content: \"percent\",\n          formatter: function formatter(val, item) {\n            return \"\".concat(item.point.name, \" : \").concat(val, \" \");\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 175\n          },\n          __self: this\n        }))));\n      })));\n    }\n  }]);\n\n  return ShowcaseLayout;\n}(Component);\n\nexport { ShowcaseLayout as default };\n\nif (require.main === module) {\n  require(\"../test-hook.jsx\")(module.exports);\n}","map":{"version":3,"sources":["/Users/zhengyunqing/Documents/zhengyunqing/project_zhengyunqing/dragout/drag/src/page/ToolBoxItem/ToolBoxItem.jsx"],"names":["React","Component","G2","Chart","Geom","Axis","Tooltip","Coord","Label","Legend","Responsive","WidthProvider","DataSet","ResponsiveReactGridLayout","ShowcaseLayout","state","arr","layouts","lg","chartData","value","name","generateLayout","console","log","dragArr","JSON","parse","sessionStorage","getItem","json","map","item","x","y","w","h","minH","minW","i","key","toString","tempJson","setState","onDelete","splice","setItem","stringify","handleAdd","Math","ceil","random","push","onLayoutChange","layout","DataView","data","dv","source","transform","type","field","dimension","as","cols","percent","formatter","val","toFixed","background","index","bind","lineWidth","stroke","point","require","main","module","exports"],"mappings":"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","sourcesContent":["import React,{Component} from \"react\";\nimport \"../styles.css\";\nimport \"../example-styles.css\";\nimport {\n    G2,\n    Chart,\n    Geom,\n    Axis,\n    Tooltip,\n    Coord,\n    Label,\n    Legend,\n} from \"bizcharts\";\nimport { Responsive, WidthProvider } from \"react-grid-layout\";\nimport DataSet from \"@antv/data-set\";\nconst ResponsiveReactGridLayout = WidthProvider(Responsive);\n\n\nexport default class ShowcaseLayout extends Component {\n    state = {\n        arr:[],\n        layouts: { lg: [] },\n        chartData:[\n            {value: 3, name: 'MPOS'},\n            {value: 7, name: '传统POS'},\n            {value: 2, name: '互联网商户'},\n            {value: 12, name: '创新POS'}\n        ],\n        // flag: false\n    };\n    componentWillMount() {\n        // 取出\n        this.setState({\n            arr: JSON.parse(sessionStorage.getItem('dragArr')) || [],\n        })  \n        console.log(this.state.arr);  \n        this.generateLayout(); // 执行初始化layouts函数\n        this.setState({\n            layouts: JSON.parse(sessionStorage.getItem('layouts')) || {}\n        })\n\n    }\n    // 初始化layouts\n    generateLayout = () => {\n        console.log(11);\n        const dragArr = JSON.parse(sessionStorage.getItem('dragArr')) || [];\n        const json = dragArr.map((item) => {\n            return (\n                {\n                    x: 0,\n                    y: 2,\n                    w: 6,\n                    h: 1,\n                    minH: 1,\n                    minW:5,\n                    i: item.key.toString(),\n                }\n            );\n        });\n        // const layouts = JSON.parse(sessionStorage.getItem('layouts')) || {lg:json};\n        const tempJson = {lg: json};\n\n        this.setState({\n            layouts: tempJson\n        })\n        \n        \n    };\n    /**\n     * 两种方式实现删除操作\n     * 1.对DOM节点进行操作\n     * 2.对已有的数组进行操作*/\n    onDelete = item => {\n        // let child = document.getElementById(item);\n        // child.parentNode.removeChild(child);\n        let dragArr = this.state.arr;\n        dragArr.splice(item,1);\n        this.setState({\n            arr:dragArr\n        })\n        // 存储\n        sessionStorage.setItem('dragArr',JSON.stringify(dragArr));\n    };\n    // 添加操作\n    handleAdd = () => {\n        let dragArr = this.state.arr;\n        let key = Math.ceil(Math.random()*100);\n        let tempJson = {key:key,};\n        dragArr.push(tempJson);\n        this.setState({\n            arr: dragArr\n        })\n        // 存储\n        sessionStorage.setItem('dragArr',JSON.stringify(dragArr));\n        this.generateLayout();\n    };\n    // 改变大小\n    onLayoutChange = (layout, layouts) => {\n        console.log(layouts);\n        // this.setState({layouts})    \n        // 存储\n        sessionStorage.setItem('layouts',JSON.stringify(layouts));\n    };\n    render() {\n        const {arr,layouts} = this.state || [] || {};\n        const { DataView } = DataSet;\n        const data = this.state.chartData || [];\n        const dv = new DataView();\n        dv.source(data).transform({\n            type: \"percent\",\n            field: \"value\",\n            dimension: \"name\",\n            as: \"percent\"\n        });\n        const cols = {\n            percent: {\n                formatter: val => {\n                    val = (val * 100).toFixed(2) + \"%\";\n                    return val;\n                }\n            }\n        };\n        return (\n            <div>\n                <button onClick={this.handleAdd}>添加</button>\n                <ResponsiveReactGridLayout\n                    layouts={layouts}\n                    onLayoutChange={this.onLayoutChange}\n                    style={{background:\"#fff\"}}\n                >\n                    {arr.map((item,index)=>{\n                        return (\n                            <div key={item.key} id={item.key} style={{background:\"#fff\"}}>\n                                <div className=\"hide-button\" onClick={this.onDelete.bind(this, index)}>\n                                    &times;\n                                </div>\n                                <Chart\n                                    width={350}\n                                    height={220}\n                                    data={dv}\n                                    scale={cols}\n                                    padding={[-10,100,30,0]}\n                                    forceFit\n                                >\n                                    <Coord type=\"theta\" radius={0.3} />\n                                    <Axis name=\"percent\" />\n                                    <Legend\n                                        position=\"right-top\"\n                                        offsetY={30}\n                                        offsetX={-10}\n                                    />\n                                    <Tooltip\n                                        showTitle={false}\n                                        itemTpl=\"<li><span style=&quot;background-color:{color};&quot; class=&quot;g2-tooltip-marker&quot;></span>{name}: {value}</li>\"\n                                    />\n                                    <Geom\n                                        type=\"intervalStack\"\n                                        position=\"percent\"\n                                        color=\"name\"\n                                        tooltip={[\n                                            \"name*percent\",\n                                            (item, percent) => {\n                                                percent = (percent * 100).toFixed(2) + \"%\";\n                                                return {\n                                                    name: item,\n                                                    value: percent\n                                                };\n                                            }\n                                        ]}\n                                        style={{\n                                            lineWidth: 1,\n                                            stroke: \"#fff\"\n                                        }}\n                                    >\n                                        <Label\n                                            content=\"percent\"\n                                            formatter={(val, item) => {\n                                                return `${item.point.name} : ${val} `;\n                                            }}\n                                        />\n                                    </Geom>\n                                </Chart>\n                            </div>\n                        );\n                    })}\n                </ResponsiveReactGridLayout>\n            </div>\n        );\n    }\n}\n\nif (require.main === module) {\n    require(\"../test-hook.jsx\")(module.exports);\n}\n"]},"metadata":{},"sourceType":"module"}